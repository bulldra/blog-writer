-   [x] Reasoning を最終プロンプト同様に折りたたみ表示に対応
-   [x] UI コンポーネントを分割（Collapsible 導入）
-   [x] 生成結果は単一プレビューに統一し、ソース（Markdown）は折りたたみで表示
-   [x] Collapsible にプレビューを追加（閉時にプレビュー表示）
-   [x] 最終プロンプト・Reasoning・ソースにプレビュー適用
-   [x] プレビュー行数を 3 行に調整（末尾表示は必要箇所のみ）
-   [x] 最終プロンプトは最終行ではなく最初の行
-   [x] リーズニングのスクロールは展開時にも同期
-   [x] 記事テンプレート「選択しない」を廃止。初回は先頭自動選択、選択は localStorage に保存
-   [x] ソースコードのスクロールはプレビュー位置に同期
-   [x] reasoning の展開時は markdown のマークアップを適用、展開前はプレーンテキスト
-   [x] reasoning の折りたたみ時の縦幅を自動調整せずに固定（72px）
-   [x] 最終プロンプトは prompt へ
-   [x] prompt の展開時は markdown のマークアップを適用、展開前はプレーンテキスト
-   [x] 記事テンプレートの選択をコンポーネント化
-   [x] コンポーネントの番号づけをを廃止
-   [x] 編集依頼のコンポーネントを切り出し
-   [x] 記事生成の追加指示は TODO リストで管理するシステムとする
-   [x] 「TODO で生成」ボタンを追加（既存の生成と同ハンドラで実行）
-   [x] プロパティ入力 → プランニング（AI）→ プラン修正 → プラン実行（AI）→ 記事生成（AI）
-   [x] プラン実行時に AI が TODO の生成と準拠を確認してリストを更新
-   [x] プラン自体は編集しない
-   [x] TODO リストの各項目に完了チェックボックスを追加
-   [x] TODO は plan の下側に自動生成
-   [x] 追加の指示（任意・固定化しません）は削除
-   [x] TODO は完了チェックボックスを追加し、完了したら打ち消し線を引く
-   [x] TODO は人間が自由に更新可能
-   [x] TODO の更新を人間がして生成を依頼することで記事を完成に近づける
-   [x] TODO を元にプロンプトを生成する
-   [x] UI のコンポーネント化をさらに推進
-   [x] 横幅を固定せずにレスポンシブ対応
-   [x] Kindle ウィジェットの構成変更: 書籍選択時に全ハイライトを取り込み対象とすることを明確化
-   [x] テンプレート削除ボタンはテンプレート名の左側に配置
-   [x] 変数名はタイトルの右側に置いて、縦幅を節約
-   [x] ウィジットに基づく提案中はローディング中であることをを分かるようにする
-   [x] ウィジットに基づく提案中は、ウィジットの選択をブロックする
-   [x] 変数名をクリックしたときに、変数名を挿入する
-   [] test コードを test 配下の適切なサブディレクトリに移動
-   [] 記事のメタデータやカスタムフィールドを設定します の説明は不要
-   [] テストコードを整理、共通化
-   [] テストコードのカバレッジを向上
-   [] テストコードのカバレッジを測定する仕組みを導
-   [] プロパティセットには日付入力と選択肢入力を追加
-   [] ウィジットに基づく提案はストリーミングで反映
-   [] いい回しと辞書のサイドバー削除
-   [] component への分割、整理、共通化リファクタリング
-   [] 不要コードを削除
-   [x] pytest 実行
-   [] selenium と chrome driver でスクレイピングするウィジェット（通常のスクレイピングと分けて管理）
-   [x] ruff, mypy, black 実行
-   [x] tasks.md 更新
-   [ ] writer 画面でのウィジェット管理や編集は不要
-   [ ] writer 画面でのプロパティ、例えば書籍タイトルはなどはプロパティセットで設定するので不要
-   [ ] writer 画面でのウィジェットは記事生成のための情報収集に使うので、plan の前に配置
